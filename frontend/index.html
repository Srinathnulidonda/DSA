<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSA Learning Platform - API Testing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .endpoint-section {
            border-left: 4px solid #007bff;
            background: #f8f9fa;
        }

        .response-box {
            background: #f1f3f4;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            max-height: 300px;
            overflow-y: auto;
        }

        .method-badge {
            font-size: 0.8rem;
            font-weight: bold;
        }

        .auth-status {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .tab-content {
            min-height: 600px;
        }

        .json-viewer {
            white-space: pre-wrap;
            word-break: break-all;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Authentication Status -->
    <div class="auth-status">
        <div id="authStatus" class="alert alert-warning" role="alert">
            <i class="fas fa-exclamation-triangle"></i> Not Authenticated
        </div>
    </div>

    <div class="container-fluid py-4">
        <div class="row">
            <!-- Header -->
            <div class="col-12 mb-4">
                <div class="card bg-primary text-white">
                    <div class="card-body">
                        <h1 class="card-title mb-0">
                            <i class="fas fa-code"></i> DSA Learning Platform API Tester
                        </h1>
                        <p class="card-text">API Base: <code>https://dsa-backend-gj8n.onrender.com</code></p>
                    </div>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="col-12">
                <ul class="nav nav-tabs" id="apiTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="auth-tab" data-bs-toggle="tab" data-bs-target="#auth"
                            type="button">
                            <i class="fas fa-lock"></i> Authentication
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
                            type="button">
                            <i class="fas fa-user"></i> Profile
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="progress-tab" data-bs-toggle="tab" data-bs-target="#progress"
                            type="button">
                            <i class="fas fa-chart-line"></i> Progress
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="notes-tab" data-bs-toggle="tab" data-bs-target="#notes"
                            type="button">
                            <i class="fas fa-sticky-note"></i> Notes
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="pomodoro-tab" data-bs-toggle="tab" data-bs-target="#pomodoro"
                            type="button">
                            <i class="fas fa-clock"></i> Pomodoro
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="ai-tab" data-bs-toggle="tab" data-bs-target="#ai" type="button">
                            <i class="fas fa-robot"></i> AI Assistant
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources"
                            type="button">
                            <i class="fas fa-book"></i> Resources
                        </button>
                    </li>
                </ul>

                <!-- Tab Content -->
                <div class="tab-content" id="apiTabsContent">
                    <!-- Authentication Tab -->
                    <div class="tab-pane fade show active" id="auth" role="tabpanel">
                        <div class="row mt-4">
                            <!-- Register -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/auth/register</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="registerForm">
                                            <div class="mb-3">
                                                <label class="form-label">Name</label>
                                                <input type="text" class="form-control" name="name" value="Test User"
                                                    required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Email</label>
                                                <input type="email" class="form-control" name="email"
                                                    value="test@example.com" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Password</label>
                                                <input type="password" class="form-control" name="password"
                                                    value="password123" required>
                                            </div>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-user-plus"></i> Register
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="registerResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Login -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/auth/login</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="loginForm">
                                            <div class="mb-3">
                                                <label class="form-label">Email</label>
                                                <input type="email" class="form-control" name="email"
                                                    value="test@example.com" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Password</label>
                                                <input type="password" class="form-control" name="password"
                                                    value="password123" required>
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-sign-in-alt"></i> Login
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="loginResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Forgot Password -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/auth/forgot-password</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="forgotPasswordForm">
                                            <div class="mb-3">
                                                <label class="form-label">Email</label>
                                                <input type="email" class="form-control" name="email"
                                                    value="test@example.com" required>
                                            </div>
                                            <button type="submit" class="btn btn-warning">
                                                <i class="fas fa-key"></i> Send Reset Link
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="forgotPasswordResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Health Check -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/health</strong>
                                    </div>
                                    <div class="card-body">
                                        <button onclick="checkHealth()" class="btn btn-info">
                                            <i class="fas fa-heartbeat"></i> Check Health
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="healthResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Tab -->
                    <div class="tab-pane fade" id="profile" role="tabpanel">
                        <div class="row mt-4">
                            <!-- Get Profile -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/profile</strong>
                                    </div>
                                    <div class="card-body">
                                        <button onclick="getProfile()" class="btn btn-info">
                                            <i class="fas fa-user"></i> Get Profile
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="getProfileResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Update Profile -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-warning method-badge">PUT</span>
                                        <strong>/profile</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="updateProfileForm">
                                            <div class="mb-3">
                                                <label class="form-label">Name</label>
                                                <input type="text" class="form-control" name="name"
                                                    value="Updated Name">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Email</label>
                                                <input type="email" class="form-control" name="email"
                                                    value="updated@example.com">
                                            </div>
                                            <button type="submit" class="btn btn-warning">
                                                <i class="fas fa-edit"></i> Update Profile
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="updateProfileResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Dashboard -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/dashboard</strong>
                                    </div>
                                    <div class="card-body">
                                        <button onclick="getDashboard()" class="btn btn-info">
                                            <i class="fas fa-tachometer-alt"></i> Get Dashboard
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="dashboardResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Notifications -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/notifications</strong>
                                    </div>
                                    <div class="card-body">
                                        <button onclick="getNotifications()" class="btn btn-info">
                                            <i class="fas fa-bell"></i> Get Notifications
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="notificationsResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Tab -->
                    <div class="tab-pane fade" id="progress" role="tabpanel">
                        <div class="row mt-4">
                            <!-- Get Progress -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/progress</strong>
                                    </div>
                                    <div class="card-body">
                                        <button onclick="getProgress()" class="btn btn-info">
                                            <i class="fas fa-chart-line"></i> Get Progress
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="getProgressResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Update Progress -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/progress</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="updateProgressForm">
                                            <div class="mb-3">
                                                <label class="form-label">Week</label>
                                                <input type="number" class="form-control" name="week" value="1" min="1"
                                                    max="14" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Day</label>
                                                <select class="form-control" name="day" required>
                                                    <option value="Monday">Monday</option>
                                                    <option value="Tuesday">Tuesday</option>
                                                    <option value="Wednesday">Wednesday</option>
                                                    <option value="Thursday">Thursday</option>
                                                    <option value="Friday">Friday</option>
                                                    <option value="Saturday">Saturday</option>
                                                    <option value="Sunday">Sunday</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Time Spent (minutes)</label>
                                                <input type="number" class="form-control" name="time_spent" value="60">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Notes</label>
                                                <textarea class="form-control" name="notes"
                                                    rows="3">Completed array operations practice</textarea>
                                            </div>
                                            <div class="mb-3 form-check">
                                                <input type="checkbox" class="form-check-input" name="completed"
                                                    checked>
                                                <label class="form-check-label">Completed</label>
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-save"></i> Update Progress
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="updateProgressResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Calendar -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/calendar</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Week (optional)</label>
                                            <input type="number" id="calendarWeek" class="form-control" min="1" max="14"
                                                placeholder="Leave empty for overview">
                                        </div>
                                        <button onclick="getCalendar()" class="btn btn-info">
                                            <i class="fas fa-calendar"></i> Get Calendar
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="calendarResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Tab -->
                    <div class="tab-pane fade" id="notes" role="tabpanel">
                        <div class="row mt-4">
                            <!-- Get Notes -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/notes</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Search</label>
                                            <input type="text" id="notesSearch" class="form-control"
                                                placeholder="Search notes...">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Week Filter</label>
                                            <input type="number" id="notesWeek" class="form-control" min="1" max="14"
                                                placeholder="Filter by week">
                                        </div>
                                        <button onclick="getNotes()" class="btn btn-info">
                                            <i class="fas fa-sticky-note"></i> Get Notes
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="getNotesResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Create Note -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/notes</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="createNoteForm">
                                            <div class="mb-3">
                                                <label class="form-label">Title</label>
                                                <input type="text" class="form-control" name="title"
                                                    value="Array Operations Notes" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Content</label>
                                                <textarea class="form-control" name="content" rows="4"
                                                    required>Arrays are fundamental data structures that store elements in contiguous memory locations...</textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Tags (comma separated)</label>
                                                <input type="text" class="form-control" name="tags"
                                                    value="arrays,data-structures,basics">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Week</label>
                                                <input type="number" class="form-control" name="week" value="1" min="1"
                                                    max="14">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Day</label>
                                                <select class="form-control" name="day">
                                                    <option value="Monday">Monday</option>
                                                    <option value="Tuesday">Tuesday</option>
                                                    <option value="Wednesday">Wednesday</option>
                                                    <option value="Thursday">Thursday</option>
                                                    <option value="Friday">Friday</option>
                                                    <option value="Saturday">Saturday</option>
                                                    <option value="Sunday">Sunday</option>
                                                </select>
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-plus"></i> Create Note
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="createNoteResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pomodoro Tab -->
                    <div class="tab-pane fade" id="pomodoro" role="tabpanel">
                        <div class="row mt-4">
                            <!-- Start Pomodoro -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/pomodoro</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="startPomodoroForm">
                                            <div class="mb-3">
                                                <label class="form-label">Duration (minutes)</label>
                                                <input type="number" class="form-control" name="duration" value="25"
                                                    min="1" max="60" required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Topic</label>
                                                <input type="text" class="form-control" name="topic"
                                                    value="Array Operations Study">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Session Type</label>
                                                <select class="form-control" name="session_type">
                                                    <option value="study">Study</option>
                                                    <option value="break">Break</option>
                                                    <option value="practice">Practice</option>
                                                </select>
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-play"></i> Start Pomodoro
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="startPomodoroResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Complete Pomodoro -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/pomodoro/{id}/complete</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Session ID</label>
                                            <input type="text" id="pomodoroSessionId" class="form-control"
                                                placeholder="Enter session ID from start response">
                                        </div>
                                        <button onclick="completePomodoro()" class="btn btn-warning">
                                            <i class="fas fa-stop"></i> Complete Pomodoro
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="completePomodoroResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Pomodoro History -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/pomodoro/history</strong>
                                    </div>
                                    <div class="card-body">
                                        <button onclick="getPomodoroHistory()" class="btn btn-info">
                                            <i class="fas fa-history"></i> Get History
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="pomodoroHistoryResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Assistant Tab -->
                    <div class="tab-pane fade" id="ai" role="tabpanel">
                        <div class="row mt-4">
                            <!-- AI Ask -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/ai/ask</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="aiAskForm">
                                            <div class="mb-3">
                                                <label class="form-label">Question</label>
                                                <textarea class="form-control" name="question" rows="3"
                                                    placeholder="Ask a question about DSA..."
                                                    required>What are the time complexities of different array operations?</textarea>
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-question-circle"></i> Ask AI
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="aiAskResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Generate Study Plan -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/ai/study-plan</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="studyPlanForm">
                                            <div class="mb-3">
                                                <label class="form-label">Available Time (minutes/day)</label>
                                                <input type="number" class="form-control" name="available_time"
                                                    value="60" min="30" max="480">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Focus Areas (comma separated)</label>
                                                <input type="text" class="form-control" name="focus_areas"
                                                    value="arrays,linked-lists,trees">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Difficulty Level</label>
                                                <select class="form-control" name="difficulty">
                                                    <option value="beginner">Beginner</option>
                                                    <option value="medium" selected>Medium</option>
                                                    <option value="advanced">Advanced</option>
                                                </select>
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-calendar-plus"></i> Generate Plan
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="studyPlanResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Generate Quiz -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-success method-badge">POST</span>
                                        <strong>/ai/quiz</strong>
                                    </div>
                                    <div class="card-body">
                                        <form id="quizForm">
                                            <div class="mb-3">
                                                <label class="form-label">Topic</label>
                                                <input type="text" class="form-control" name="topic" value="arrays"
                                                    required>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Difficulty</label>
                                                <select class="form-control" name="difficulty">
                                                    <option value="easy">Easy</option>
                                                    <option value="medium" selected>Medium</option>
                                                    <option value="hard">Hard</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Number of Questions</label>
                                                <input type="number" class="form-control" name="question_count"
                                                    value="5" min="1" max="10">
                                            </div>
                                            <button type="submit" class="btn btn-success">
                                                <i class="fas fa-question"></i> Generate Quiz
                                            </button>
                                        </form>
                                        <div class="response-box mt-3 p-3">
                                            <div id="quizResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Resources Tab -->
                    <div class="tab-pane fade" id="resources" role="tabpanel">
                        <div class="row mt-4">
                            <!-- Get Resources -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/resources</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Type Filter</label>
                                            <select id="resourceType" class="form-control">
                                                <option value="">All Types</option>
                                                <option value="text">Text</option>
                                                <option value="video">Video</option>
                                                <option value="interactive">Interactive</option>
                                                <option value="practice">Practice</option>
                                            </select>
                                        </div>
                                        <button onclick="getResources()" class="btn btn-info">
                                            <i class="fas fa-book"></i> Get Resources
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="resourcesResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Get Roadmap -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/roadmap</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Week (optional)</label>
                                            <input type="number" id="roadmapWeek" class="form-control" min="1" max="14"
                                                placeholder="Leave empty for full roadmap">
                                        </div>
                                        <button onclick="getRoadmap()" class="btn btn-info">
                                            <i class="fas fa-route"></i> Get Roadmap
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="roadmapResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Search -->
                            <div class="col-md-6 mb-4">
                                <div class="card endpoint-section">
                                    <div class="card-header">
                                        <span class="badge bg-info method-badge">GET</span>
                                        <strong>/search</strong>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">Search Query</label>
                                            <input type="text" id="searchQuery" class="form-control" value="arrays"
                                                placeholder="Search term...">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Search Type</label>
                                            <select id="searchType" class="form-control">
                                                <option value="all">All</option>
                                                <option value="resources">Resources</option>
                                                <option value="roadmap">Roadmap</option>
                                                <option value="notes">Notes</option>
                                            </select>
                                        </div>
                                        <button onclick="searchContent()" class="btn btn-info">
                                            <i class="fas fa-search"></i> Search
                                        </button>
                                        <div class="response-box mt-3 p-3">
                                            <div id="searchResponse" class="json-viewer"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // API Configuration
        const API_BASE = 'https://dsa-backend-gj8n.onrender.com';
        let accessToken = localStorage.getItem('access_token');
        let refreshToken = localStorage.getItem('refresh_token');

        // Update auth status
        function updateAuthStatus() {
            const authStatus = document.getElementById('authStatus');
            if (accessToken) {
                authStatus.className = 'alert alert-success';
                authStatus.innerHTML = '<i class="fas fa-check-circle"></i> Authenticated';
            } else {
                authStatus.className = 'alert alert-warning';
                authStatus.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Not Authenticated';
            }
        }

        // API Request Helper
        async function apiRequest(endpoint, options = {}) {
            const url = `${API_BASE}${endpoint}`;
            const headers = {
                'Content-Type': 'application/json',
                ...options.headers
            };

            if (accessToken && !options.skipAuth) {
                headers['Authorization'] = `Bearer ${accessToken}`;
            }

            try {
                const response = await fetch(url, {
                    ...options,
                    headers
                });

                const data = await response.json();

                if (!response.ok) {
                    if (response.status === 401 && refreshToken && !options.skipAuth) {
                        // Try to refresh token
                        const refreshResponse = await fetch(`${API_BASE}/auth/refresh`, {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${refreshToken}`,
                                'Content-Type': 'application/json'
                            }
                        });

                        if (refreshResponse.ok) {
                            const refreshData = await refreshResponse.json();
                            accessToken = refreshData.access_token;
                            localStorage.setItem('access_token', accessToken);
                            updateAuthStatus();

                            // Retry original request
                            headers['Authorization'] = `Bearer ${accessToken}`;
                            const retryResponse = await fetch(url, { ...options, headers });
                            return await retryResponse.json();
                        }
                    }
                    throw new Error(data.error || `HTTP ${response.status}`);
                }

                return data;
            } catch (error) {
                console.error('API Request failed:', error);
                throw error;
            }
        }

        // Display response in UI
        function displayResponse(elementId, data) {
            const element = document.getElementById(elementId);
            element.textContent = JSON.stringify(data, null, 2);
        }

        // Form submission helper
        function handleFormSubmit(formId, endpoint, method = 'POST', responseElementId) {
            document.getElementById(formId).addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = {};

                for (let [key, value] of formData.entries()) {
                    if (key === 'tags') {
                        data[key] = value.split(',').map(tag => tag.trim()).filter(tag => tag);
                    } else if (key === 'completed') {
                        data[key] = formData.has(key);
                    } else if (['week', 'time_spent', 'duration', 'question_count', 'available_time'].includes(key)) {
                        data[key] = parseInt(value) || 0;
                    } else {
                        data[key] = value;
                    }
                }

                try {
                    const response = await apiRequest(endpoint, {
                        method,
                        body: JSON.stringify(data)
                    });
                    displayResponse(responseElementId, response);

                    // Handle login response
                    if (responseElementId === 'loginResponse' && response.access_token) {
                        accessToken = response.access_token;
                        refreshToken = response.refresh_token;
                        localStorage.setItem('access_token', accessToken);
                        localStorage.setItem('refresh_token', refreshToken);
                        updateAuthStatus();
                    }
                } catch (error) {
                    displayResponse(responseElementId, { error: error.message });
                }
            });
        }

        // Authentication Functions
        handleFormSubmit('registerForm', '/auth/register', 'POST', 'registerResponse');
        handleFormSubmit('loginForm', '/auth/login', 'POST', 'loginResponse');
        handleFormSubmit('forgotPasswordForm', '/auth/forgot-password', 'POST', 'forgotPasswordResponse');

        // Profile Functions
        handleFormSubmit('updateProfileForm', '/profile', 'PUT', 'updateProfileResponse');

        async function getProfile() {
            try {
                const response = await apiRequest('/profile');
                displayResponse('getProfileResponse', response);
            } catch (error) {
                displayResponse('getProfileResponse', { error: error.message });
            }
        }

        async function getDashboard() {
            try {
                const response = await apiRequest('/dashboard');
                displayResponse('dashboardResponse', response);
            } catch (error) {
                displayResponse('dashboardResponse', { error: error.message });
            }
        }

        async function getNotifications() {
            try {
                const response = await apiRequest('/notifications');
                displayResponse('notificationsResponse', response);
            } catch (error) {
                displayResponse('notificationsResponse', { error: error.message });
            }
        }

        // Progress Functions
        handleFormSubmit('updateProgressForm', '/progress', 'POST', 'updateProgressResponse');

        async function getProgress() {
            try {
                const response = await apiRequest('/progress');
                displayResponse('getProgressResponse', response);
            } catch (error) {
                displayResponse('getProgressResponse', { error: error.message });
            }
        }

        async function getCalendar() {
            try {
                const week = document.getElementById('calendarWeek').value;
                const endpoint = week ? `/calendar?week=${week}` : '/calendar';
                const response = await apiRequest(endpoint);
                displayResponse('calendarResponse', response);
            } catch (error) {
                displayResponse('calendarResponse', { error: error.message });
            }
        }

        // Notes Functions
        handleFormSubmit('createNoteForm', '/notes', 'POST', 'createNoteResponse');

        async function getNotes() {
            try {
                const search = document.getElementById('notesSearch').value;
                const week = document.getElementById('notesWeek').value;
                let endpoint = '/notes?';
                const params = new URLSearchParams();

                if (search) params.append('search', search);
                if (week) params.append('week', week);

                endpoint += params.toString();
                const response = await apiRequest(endpoint);
                displayResponse('getNotesResponse', response);
            } catch (error) {
                displayResponse('getNotesResponse', { error: error.message });
            }
        }

        // Pomodoro Functions
        handleFormSubmit('startPomodoroForm', '/pomodoro', 'POST', 'startPomodoroResponse');

        async function completePomodoro() {
            const sessionId = document.getElementById('pomodoroSessionId').value;
            if (!sessionId) {
                displayResponse('completePomodoroResponse', { error: 'Session ID required' });
                return;
            }

            try {
                const response = await apiRequest(`/pomodoro/${sessionId}/complete`, { method: 'POST' });
                displayResponse('completePomodoroResponse', response);
            } catch (error) {
                displayResponse('completePomodoroResponse', { error: error.message });
            }
        }

        async function getPomodoroHistory() {
            try {
                const response = await apiRequest('/pomodoro/history');
                displayResponse('pomodoroHistoryResponse', response);
            } catch (error) {
                displayResponse('pomodoroHistoryResponse', { error: error.message });
            }
        }

        // AI Functions
        handleFormSubmit('aiAskForm', '/ai/ask', 'POST', 'aiAskResponse');

        document.getElementById('studyPlanForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = {
                available_time: parseInt(formData.get('available_time')),
                focus_areas: formData.get('focus_areas').split(',').map(area => area.trim()).filter(area => area),
                difficulty: formData.get('difficulty')
            };

            try {
                const response = await apiRequest('/ai/study-plan', {
                    method: 'POST',
                    body: JSON.stringify(data)
                });
                displayResponse('studyPlanResponse', response);
            } catch (error) {
                displayResponse('studyPlanResponse', { error: error.message });
            }
        });

        handleFormSubmit('quizForm', '/ai/quiz', 'POST', 'quizResponse');

        // Resource Functions
        async function getResources() {
            try {
                const type = document.getElementById('resourceType').value;
                const endpoint = type ? `/resources?type=${type}` : '/resources';
                const response = await apiRequest(endpoint, { skipAuth: true });
                displayResponse('resourcesResponse', response);
            } catch (error) {
                displayResponse('resourcesResponse', { error: error.message });
            }
        }

        async function getRoadmap() {
            try {
                const week = document.getElementById('roadmapWeek').value;
                const endpoint = week ? `/roadmap?week=${week}` : '/roadmap';
                const response = await apiRequest(endpoint, { skipAuth: true });
                displayResponse('roadmapResponse', response);
            } catch (error) {
                displayResponse('roadmapResponse', { error: error.message });
            }
        }

        async function searchContent() {
            try {
                const query = document.getElementById('searchQuery').value;
                const type = document.getElementById('searchType').value;
                if (!query) {
                    displayResponse('searchResponse', { error: 'Search query required' });
                    return;
                }

                const params = new URLSearchParams({ q: query });
                if (type !== 'all') params.append('type', type);

                const response = await apiRequest(`/search?${params.toString()}`);
                displayResponse('searchResponse', response);
            } catch (error) {
                displayResponse('searchResponse', { error: error.message });
            }
        }

        // Health Check
        async function checkHealth() {
            try {
                const response = await apiRequest('/health', { skipAuth: true });
                displayResponse('healthResponse', response);
            } catch (error) {
                displayResponse('healthResponse', { error: error.message });
            }
        }

        // Initialize
        updateAuthStatus();
    </script>
</body>

</html>